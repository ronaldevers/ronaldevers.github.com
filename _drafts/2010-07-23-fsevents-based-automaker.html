---
title: 
layout: post
---

'2010-07-23 07:44:13','Inspired by rspec\'s autospec and its use (through a plugin) of the FSEvents API, I decided to write an FSEvents based app that would do something when a directory\'s content changes. Turns out I still hate Mac OS programming, you need a RunLoop and all kinds of other unclear code. Luckily someone has written Ruby bindings and published them on GitHub. See <a href=\"http://github.com/ymendel/fsevents\">http://github.com/ymendel/fsevents</a> for details or just install:\r\n<pre>(sudo) gem install fsevents</pre>\r\nNow it is ridiculously easy to write FSEvents applications. Consider for instance the following example which monitors a path and runs \'make all\' whenever something has changed. Note that the FSEvents part in this app is only 2 or 3 lines!\r\n<pre>require \'rubygems\'\r\nrequire \'fsevents\'\r\n\r\npath_to_watch = \'/path/to/watch\'\r\nfilename_filter = \'.tex\'\r\n\r\ndef make\r\n  if system(\"cd #{path_to_watch} &amp;&amp; make all\")\r\n    system(\"growlnotify -m \'Make all finished without errors!\'\")\r\n  else\r\n    system(\"growlnotify -m \'Something very, very bad has happened!\'\")\r\n  end\r\nend\r\n\r\nstream = FSEvents::Stream.watch(path_to_watch) { |events|\r\n  make if events.modified_files.map{ |f| f.include?(filename_filter) }.include?(true)\r\n}\r\nstream.run</pre>\r\nAnd all was well in the world.\r\n\r\nUpdate: it\'s now a gem! See <a href=\"?p=12\">this post</a> for more information.\r\n\r\nUpdate2: I think this is a fun and simple fsevents api demo, but to do the \'automaking\' you could just use bash: <a href=\"http://blog.ronaldevers.nl/2010/08/automatically-compile-tex-files-on-save/\">see my new post</a>.','FSEvents based automaker','','publish','open','open','','fsevents-based-automaker','','\nhttp://blog.ronaldevers.nl/2010/08/automatically-compile-tex-files-on-save/','2010-08-24 12:54:36','2010-08-24 10:54:36','',0,'http://blog.ronaldevers.nl/?p=8',0,'post','',0);
